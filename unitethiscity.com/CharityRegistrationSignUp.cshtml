@{
    Layout = "~/Shared/_Layout.cshtml";

    // identify the page and load the navigation info into the page
    Page.SitePage = new SiteWebPage(PageContext.Page.VirtualPath);

    // Handle posting of the form
    CharityRegistrationForm formDo = new CharityRegistrationForm( Request.Form );
    if( IsPost )
    {
        formDo.ProcessForm( );
    }
}
@section head
{
	<script src="@Href( "~/Scripts/jquery.validate.min.js" )" type="text/javascript"></script>
	<script type="text/javascript">
	    $(document).ready(function () {
	        $("#frm").validate(
			{
			    messages:
				{
				    txtChaFName: { required: "required" },
				    txtChaLName: { required: "required" },
				    txtChaCharityName: { required: "required" },
				    emlChaEMail: { required: "required", email: "invalid" },
				    txtChaPhone: { required: "required" }
				}
			});
	    });
	</script>
}
	<!-- PAGE -->
	<div id="page">
		<div id="leftSide">
			<h1>@Html.Raw( Page.SitePage.PageParentHeading )</h1>
			<h2>@Html.Raw( Page.SitePage.Heading )</h2>
            @Html.Raw( Page.SitePage.Body )
            <!-- REGISTRATION SIGNUP FORM -->
            <form id="frm" method="post" class="basicForm">
                <fieldset style="margin:0px auto;">
                @if( ( formDo.ResultCode != Sancsoft.Web.RC.Ok ) || !formDo.ProcessedPost )
                {
                    if( formDo.ResultCode != Sancsoft.Web.RC.Ok )
                    {
                        <div style="font-weight:bold;color:Red;">@formDo.ResultTitle( )</div>
                        <p style="color:Red;">@formDo.ResultMessage( )</p>
                    }
                    <div>
                        <label for="txtChaFName">First Name</label><br />
                        <input type="text" name="txtChaFName" class="required" maxlength="50" value="@Request["txtChaFName"]" />
                    </div>
                    <div>
                        <label for="txtChaLName">Last Name</label><br />
                        <input type="text" name="txtChaLName" class="required" maxlength="50" value="@Request["txtChaLName"]" />
                    </div>
                    <br style="clear:left;" />
                    <br />
                    <div>
                        <label for="txtChaCharityName">Charity Name</label><br />
                        <input type="text" name="txtChaCharityName" class="required" maxlength="128" style="width:432px;" value="@Request["txtChaCharityName"]" />
                    </div>
                    <br style="clear:left;" />
                    <br />
                    <div>
                        <label for="emlChaEMail">E-Mail Address</label><br />
                        <input type="email" name="emlChaEMail" class="required email" maxlength="128" style="width:300px;" value="@Request["emlChaEMail"]" />
                    </div>
                    <br style="clear:left;" />
                    <br />
                    <div>
                        <label for="txtChaPhone">Phone Number</label><br />
                        <input type="text" name="txtChaPhone" class="required" maxlength="50" style="width:300px;" value="@Request["txtChaPhone"]" />
                    </div>
                    <br style="clear:left;" />
                    <br />
                    <div style="width:436px;">
                        <label for="txtChaAdditionalInfo">Please provide any additional information about your charity...</label><br />
                        <textarea name="txtChaAdditionalInfo" rows="4" cols="30">@Request["txtChaAdditionalInfo"]</textarea>
                    </div>
                    <br style="clear:left;" />
                    <br style="clear:left;" />
                    <div class="orangeButtonLeftHands">
                        <input type="submit" name="_btnSubmit" value="Charity Signup" class="button" />
                    </div>
                    <br style="clear:both;" />
                }
                else
                {
                    // form submission completed
                    <p>Thank you. Your information has been successfully recorded.</p>
                }
                </fieldset>
            </form>
		</div>
		@RenderPage( "~/Shared/_RightColumn.cshtml" )
		<br style="clear:left;" />
	</div>